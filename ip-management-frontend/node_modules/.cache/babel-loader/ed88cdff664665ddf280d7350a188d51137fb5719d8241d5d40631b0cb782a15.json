{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate,Link}from'react-router-dom';import{getApplicationById,updateApplicationStatus,downloadFile}from'../services/api';import Modal from'./Modal';import'../styles/Buttons.css';import'../styles/Form.css';import'../styles/App.css';import'../styles/ApplicationDetail.css';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const formatStatus=status=>{if(!status)return'N/A';return status.toLowerCase().replace(/_/g,' ').replace(/(?: |\\b)(\\w)/g,char=>char.toUpperCase());};const STAGES=['DRAFTING_AND_FILING','FORMALITY_EXAMINATION','APPLICATION_PUBLICATION','SUBSTANTIVE_EXAMINATION_REQUEST','SUBSTANTIVE_EXAMINATION','FEE_PAYMENT_AND_GRANT'];const ApplicationDetail=_ref=>{let{user}=_ref;const{id}=useParams();const navigate=useNavigate();// Component State\nconst[application,setApplication]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[isAuthorized,setIsAuthorized]=useState(false);const[statusChangeError,setStatusChangeError]=useState('');// Reviewer-specific state\nconst[adminTab,setAdminTab]=useState('dossier');const[modalAction,setModalAction]=useState(null);// e.g., 'reject', 'requestInfo'\nconst[isModalOpen,setIsModalOpen]=useState(false);const[rejectionReason,setRejectionReason]=useState('');useEffect(()=>{const fetchApplication=async()=>{try{const response=await getApplicationById(id);const fetchedApp=response.data;setApplication(fetchedApp);if(user.role==='REVIEWER'||user.role==='USER'&&fetchedApp.submittedByUsername===user.username){setIsAuthorized(true);}}catch(err){setError('Failed to fetch application details.');}finally{setLoading(false);}};if(user)fetchApplication();},[id,user]);const handleStatusUpdate=async function(newStatus){let reason=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';setStatusChangeError('');try{const response=await updateApplicationStatus(id,{status:newStatus,rejectionReason:reason});setApplication(response.data);setRejectionReason('');setIsModalOpen(false);setModalAction(null);}catch(err){var _err$response,_err$response$data;setStatusChangeError(\"Failed to update status: \".concat(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||err.message));}};const openModal=action=>{setModalAction(action);setIsModalOpen(true);};const renderReviewerActions=()=>{const status=application.status;return/*#__PURE__*/_jsxs(\"div\",{className:\"action-panel\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Action Panel\"}),status==='FORMALITY_EXAMINATION'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"button-success\",onClick:()=>handleStatusUpdate('APPLICATION_PUBLICATION'),children:\"\\u2714 Pass Formality Check\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button-warning\",onClick:()=>openModal('requestCorrection'),children:\"\\u274C Request Correction\"})]}),status==='APPLICATION_PUBLICATION'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleStatusUpdate('SUBSTANTIVE_EXAMINATION_REQUEST'),children:\"\\uD83D\\uDCE3 Publish Application\"}),status==='SUBSTANTIVE_EXAMINATION_REQUEST'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleStatusUpdate('SUBSTANTIVE_EXAMINATION'),children:\"\\u2714 Confirm Request\"}),status==='SUBSTANTIVE_EXAMINATION'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"button-success\",onClick:()=>handleStatusUpdate('FEE_PAYMENT_AND_GRANT'),children:\"\\u2714 Pass Substantive Exam\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button-danger\",onClick:()=>openModal('reject'),children:\"\\u274C Reject Application\"})]}),status==='FEE_PAYMENT_AND_GRANT'&&/*#__PURE__*/_jsx(\"p\",{children:\"Waiting for user to pay the fee.\"}),status==='DRAFTING_AND_FILING'&&/*#__PURE__*/_jsx(\"p\",{children:\"Waiting for user to submit.\"})]});};const renderUserActions=()=>{const status=application.status;if(application.rejectionReason&&status==='DRAFTING_AND_FILING'){return/*#__PURE__*/_jsx(Link,{to:\"/applications/\".concat(id,\"/amend\"),className:\"button-primary\",children:\"\\u270F\\uFE0F Amend and Resubmit\"});}switch(status){case'DRAFTING_AND_FILING':return/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleStatusUpdate('FORMALITY_EXAMINATION'),children:\"Submit for Examination\"});case'SUBSTANTIVE_EXAMINATION_REQUEST':return/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleStatusUpdate('SUBSTANTIVE_EXAMINATION'),children:\"Activate Substantive Examination\"});case'FEE_PAYMENT_AND_GRANT':return/*#__PURE__*/_jsx(Link,{to:\"/applications/\".concat(id,\"/payment\"),className:\"button-success\",children:\"Pay Fee & Receive Patent\"});default:return/*#__PURE__*/_jsx(\"p\",{children:\"No actions available at this stage. Please wait for the reviewer.\"});}};const renderModalContent=()=>{if(!modalAction)return null;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Reason:\"}),/*#__PURE__*/_jsx(\"textarea\",{value:rejectionReason,onChange:e=>setRejectionReason(e.target.value),rows:\"4\",style:{width:'100%'}})]}),/*#__PURE__*/_jsx(\"button\",{className:\"button-primary\",onClick:()=>handleStatusUpdate('DRAFTING_AND_FILING',rejectionReason),disabled:!rejectionReason,children:\"Confirm & Send to User\"})]});};if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading application details...\"});if(error)return/*#__PURE__*/_jsx(\"p\",{className:\"error-text\",children:error});if(!isAuthorized)return/*#__PURE__*/_jsx(\"p\",{className:\"error-text\",children:\"You are not authorized to view this application.\"});if(!application)return/*#__PURE__*/_jsx(\"p\",{children:\"No application found.\"});const isReviewer=user.role==='REVIEWER';const currentStatusIndex=STAGES.indexOf(application.status);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Modal,{isOpen:isModalOpen,onClose:()=>setIsModalOpen(false),title:\"Action: \".concat(formatStatus(modalAction)),children:renderModalContent()}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-header\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:application.title}),/*#__PURE__*/_jsxs(\"p\",{children:[\"ID: \",application.id,\" | Submitted by: \",application.submittedByUsername]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"status-badge \".concat(application.status.toLowerCase()),children:formatStatus(application.status)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"workflow-container\",children:STAGES.map((stage,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"workflow-stage \".concat(index===currentStatusIndex?'active':'',\" \").concat(index<currentStatusIndex?'completed':''),children:[/*#__PURE__*/_jsx(\"div\",{className:\"workflow-dot\"}),/*#__PURE__*/_jsx(\"div\",{className:\"workflow-label\",children:formatStatus(stage)})]},stage))}),statusChangeError&&/*#__PURE__*/_jsx(\"p\",{className:\"error-text\",style:{textAlign:'center'},children:statusChangeError}),isReviewer?/*#__PURE__*/_jsxs(\"div\",{className:\"reviewer-view\",children:[renderReviewerActions(),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-tabs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tab-navigation\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setAdminTab('dossier'),className:adminTab==='dossier'?'active':'',children:\"Dossier\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setAdminTab('notes'),className:adminTab==='notes'?'active':'',children:\"Review Notes\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setAdminTab('history'),className:adminTab==='history'?'active':'',children:\"History\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content\",children:[adminTab==='dossier'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Application Dossier\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Description:\"}),\" \",application.description]})]}),adminTab==='notes'&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{children:\"Internal review notes placeholder.\"})}),adminTab==='history'&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{children:\"Application state history placeholder.\"})})]})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"user-view\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Application Details\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Description:\"}),\" \",application.description]}),application.rejectionReason&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-warning\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Reason for Amendment:\"}),\" \",application.rejectionReason]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"My Actions\"}),renderUserActions()]})]})]});};export default ApplicationDetail;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","Link","getApplicationById","updateApplicationStatus","downloadFile","Modal","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","formatStatus","status","toLowerCase","replace","char","toUpperCase","STAGES","ApplicationDetail","_ref","user","id","navigate","application","setApplication","loading","setLoading","error","setError","isAuthorized","setIsAuthorized","statusChangeError","setStatusChangeError","adminTab","setAdminTab","modalAction","setModalAction","isModalOpen","setIsModalOpen","rejectionReason","setRejectionReason","fetchApplication","response","fetchedApp","data","role","submittedByUsername","username","err","handleStatusUpdate","newStatus","reason","arguments","length","undefined","_err$response","_err$response$data","concat","message","openModal","action","renderReviewerActions","className","children","onClick","renderUserActions","to","renderModalContent","value","onChange","e","target","rows","style","width","disabled","isReviewer","currentStatusIndex","indexOf","isOpen","onClose","title","map","stage","index","textAlign","description"],"sources":["C:/Users/Admin/OneDrive/M√°y t√≠nh/B√°o c√°o project 1/SHTT_NEW/ip-management-frontend/src/components/ApplicationDetail.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate, Link } from 'react-router-dom';\r\nimport { getApplicationById, updateApplicationStatus, downloadFile } from '../services/api';\r\nimport Modal from './Modal';\r\nimport '../styles/Buttons.css';\r\nimport '../styles/Form.css';\r\nimport '../styles/App.css';\r\nimport '../styles/ApplicationDetail.css';\r\n\r\nconst formatStatus = (status) => {\r\n  if (!status) return 'N/A';\r\n  return status.toLowerCase().replace(/_/g, ' ').replace(/(?: |\\b)(\\w)/g, (char) => char.toUpperCase());\r\n};\r\n\r\nconst STAGES = [\r\n  'DRAFTING_AND_FILING', 'FORMALITY_EXAMINATION', 'APPLICATION_PUBLICATION',\r\n  'SUBSTANTIVE_EXAMINATION_REQUEST', 'SUBSTANTIVE_EXAMINATION', 'FEE_PAYMENT_AND_GRANT'\r\n];\r\n\r\nconst ApplicationDetail = ({ user }) => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n\r\n  // Component State\r\n  const [application, setApplication] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [isAuthorized, setIsAuthorized] = useState(false);\r\n  const [statusChangeError, setStatusChangeError] = useState('');\r\n  \r\n  // Reviewer-specific state\r\n  const [adminTab, setAdminTab] = useState('dossier');\r\n  const [modalAction, setModalAction] = useState(null); // e.g., 'reject', 'requestInfo'\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [rejectionReason, setRejectionReason] = useState('');\r\n\r\n  useEffect(() => {\r\n    const fetchApplication = async () => {\r\n      try {\r\n        const response = await getApplicationById(id);\r\n        const fetchedApp = response.data;\r\n        setApplication(fetchedApp);\r\n        if (user.role === 'REVIEWER' || (user.role === 'USER' && fetchedApp.submittedByUsername === user.username)) {\r\n          setIsAuthorized(true);\r\n        }\r\n      } catch (err) {\r\n        setError('Failed to fetch application details.');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    if (user) fetchApplication();\r\n  }, [id, user]);\r\n\r\n  const handleStatusUpdate = async (newStatus, reason = '') => {\r\n    setStatusChangeError('');\r\n    try {\r\n      const response = await updateApplicationStatus(id, { status: newStatus, rejectionReason: reason });\r\n      setApplication(response.data);\r\n      setRejectionReason('');\r\n      setIsModalOpen(false);\r\n      setModalAction(null);\r\n    } catch (err) {\r\n      setStatusChangeError(`Failed to update status: ${err.response?.data?.message || err.message}`);\r\n    }\r\n  };\r\n  \r\n  const openModal = (action) => {\r\n    setModalAction(action);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const renderReviewerActions = () => {\r\n    const status = application.status;\r\n    return (\r\n      <div className=\"action-panel\">\r\n        <h4>Action Panel</h4>\r\n        {status === 'FORMALITY_EXAMINATION' && (\r\n          <>\r\n            <button className=\"button-success\" onClick={() => handleStatusUpdate('APPLICATION_PUBLICATION')}>‚úî Pass Formality Check</button>\r\n            <button className=\"button-warning\" onClick={() => openModal('requestCorrection')}>‚ùå Request Correction</button>\r\n          </>\r\n        )}\r\n        {status === 'APPLICATION_PUBLICATION' && <button onClick={() => handleStatusUpdate('SUBSTANTIVE_EXAMINATION_REQUEST')}>üì£ Publish Application</button>}\r\n        {status === 'SUBSTANTIVE_EXAMINATION_REQUEST' && <button onClick={() => handleStatusUpdate('SUBSTANTIVE_EXAMINATION')}>‚úî Confirm Request</button>}\r\n        {status === 'SUBSTANTIVE_EXAMINATION' && (\r\n          <>\r\n            <button className=\"button-success\" onClick={() => handleStatusUpdate('FEE_PAYMENT_AND_GRANT')}>‚úî Pass Substantive Exam</button>\r\n            <button className=\"button-danger\" onClick={() => openModal('reject')}>‚ùå Reject Application</button>\r\n          </>\r\n        )}\r\n        {status === 'FEE_PAYMENT_AND_GRANT' && <p>Waiting for user to pay the fee.</p>}\r\n        {status === 'DRAFTING_AND_FILING' && <p>Waiting for user to submit.</p>}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderUserActions = () => {\r\n    const status = application.status;\r\n     if (application.rejectionReason && status === 'DRAFTING_AND_FILING') {\r\n      return <Link to={`/applications/${id}/amend`} className=\"button-primary\">‚úèÔ∏è Amend and Resubmit</Link>;\r\n    }\r\n    switch (status) {\r\n      case 'DRAFTING_AND_FILING':\r\n        return <button onClick={() => handleStatusUpdate('FORMALITY_EXAMINATION')}>Submit for Examination</button>;\r\n      case 'SUBSTANTIVE_EXAMINATION_REQUEST':\r\n        return <button onClick={() => handleStatusUpdate('SUBSTANTIVE_EXAMINATION')}>Activate Substantive Examination</button>;\r\n      case 'FEE_PAYMENT_AND_GRANT':\r\n        return <Link to={`/applications/${id}/payment`} className=\"button-success\">Pay Fee & Receive Patent</Link>;\r\n      default:\r\n        return <p>No actions available at this stage. Please wait for the reviewer.</p>;\r\n    }\r\n  };\r\n\r\n  const renderModalContent = () => {\r\n    if (!modalAction) return null;\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"form-group\">\r\n                <label>Reason:</label>\r\n                <textarea\r\n                    value={rejectionReason}\r\n                    onChange={(e) => setRejectionReason(e.target.value)}\r\n                    rows=\"4\"\r\n                    style={{ width: '100%' }}\r\n                />\r\n            </div>\r\n            <button \r\n                className=\"button-primary\" \r\n                onClick={() => handleStatusUpdate('DRAFTING_AND_FILING', rejectionReason)}\r\n                disabled={!rejectionReason}\r\n            >\r\n                Confirm & Send to User\r\n            </button>\r\n        </div>\r\n    );\r\n  };\r\n  \r\n  if (loading) return <p>Loading application details...</p>;\r\n  if (error) return <p className=\"error-text\">{error}</p>;\r\n  if (!isAuthorized) return <p className=\"error-text\">You are not authorized to view this application.</p>;\r\n  if (!application) return <p>No application found.</p>;\r\n\r\n  const isReviewer = user.role === 'REVIEWER';\r\n  const currentStatusIndex = STAGES.indexOf(application.status);\r\n\r\n  return (\r\n    <>\r\n      <Modal isOpen={isModalOpen} onClose={() => setIsModalOpen(false)} title={`Action: ${formatStatus(modalAction)}`}>\r\n        {renderModalContent()}\r\n      </Modal>\r\n\r\n      <div className=\"detail-header\">\r\n        <div>\r\n          <h2>{application.title}</h2>\r\n          <p>ID: {application.id} | Submitted by: {application.submittedByUsername}</p>\r\n        </div>\r\n        <div className={`status-badge ${application.status.toLowerCase()}`}>\r\n          {formatStatus(application.status)}\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"workflow-container\">\r\n        {STAGES.map((stage, index) => (\r\n          <div key={stage} className={`workflow-stage ${index === currentStatusIndex ? 'active' : ''} ${index < currentStatusIndex ? 'completed' : ''}`}>\r\n            <div className=\"workflow-dot\"></div>\r\n            <div className=\"workflow-label\">{formatStatus(stage)}</div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {statusChangeError && <p className=\"error-text\" style={{ textAlign: 'center' }}>{statusChangeError}</p>}\r\n      \r\n      {isReviewer ? (\r\n        <div className=\"reviewer-view\">\r\n          {renderReviewerActions()}\r\n          <div className=\"detail-tabs\">\r\n            <div className=\"tab-navigation\">\r\n              <button onClick={() => setAdminTab('dossier')} className={adminTab === 'dossier' ? 'active' : ''}>Dossier</button>\r\n              <button onClick={() => setAdminTab('notes')} className={adminTab === 'notes' ? 'active' : ''}>Review Notes</button>\r\n              <button onClick={() => setAdminTab('history')} className={adminTab === 'history' ? 'active' : ''}>History</button>\r\n            </div>\r\n            <div className=\"tab-content\">\r\n              {adminTab === 'dossier' && (\r\n                  <div>\r\n                    <h4>Application Dossier</h4>\r\n                    <p><strong>Description:</strong> {application.description}</p>\r\n                    {/* File list, etc. */}\r\n                  </div>\r\n              )}\r\n              {adminTab === 'notes' && <div><p>Internal review notes placeholder.</p></div>}\r\n              {adminTab === 'history' && <div><p>Application state history placeholder.</p></div>}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"user-view\">\r\n            <div className=\"detail-card\">\r\n              <h3>Application Details</h3>\r\n              <p><strong>Description:</strong> {application.description}</p>\r\n              {application.rejectionReason && (\r\n                <div className=\"alert alert-warning\"><strong>Reason for Amendment:</strong> {application.rejectionReason}</div>\r\n              )}\r\n            </div>\r\n            <div className=\"detail-card\">\r\n                <h3>My Actions</h3>\r\n                {renderUserActions()}\r\n            </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ApplicationDetail;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,SAAS,CAAEC,WAAW,CAAEC,IAAI,KAAQ,kBAAkB,CAC/D,OAASC,kBAAkB,CAAEC,uBAAuB,CAAEC,YAAY,KAAQ,iBAAiB,CAC3F,MAAO,CAAAC,KAAK,KAAM,SAAS,CAC3B,MAAO,uBAAuB,CAC9B,MAAO,oBAAoB,CAC3B,MAAO,mBAAmB,CAC1B,MAAO,iCAAiC,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,QAAA,IAAAC,SAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEzC,KAAM,CAAAC,YAAY,CAAIC,MAAM,EAAK,CAC/B,GAAI,CAACA,MAAM,CAAE,MAAO,KAAK,CACzB,MAAO,CAAAA,MAAM,CAACC,WAAW,CAAC,CAAC,CAACC,OAAO,CAAC,IAAI,CAAE,GAAG,CAAC,CAACA,OAAO,CAAC,eAAe,CAAGC,IAAI,EAAKA,IAAI,CAACC,WAAW,CAAC,CAAC,CAAC,CACvG,CAAC,CAED,KAAM,CAAAC,MAAM,CAAG,CACb,qBAAqB,CAAE,uBAAuB,CAAE,yBAAyB,CACzE,iCAAiC,CAAE,yBAAyB,CAAE,uBAAuB,CACtF,CAED,KAAM,CAAAC,iBAAiB,CAAGC,IAAA,EAAc,IAAb,CAAEC,IAAK,CAAC,CAAAD,IAAA,CACjC,KAAM,CAAEE,EAAG,CAAC,CAAGvB,SAAS,CAAC,CAAC,CAC1B,KAAM,CAAAwB,QAAQ,CAAGvB,WAAW,CAAC,CAAC,CAE9B;AACA,KAAM,CAACwB,WAAW,CAAEC,cAAc,CAAC,CAAG5B,QAAQ,CAAC,IAAI,CAAC,CACpD,KAAM,CAAC6B,OAAO,CAAEC,UAAU,CAAC,CAAG9B,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAAC+B,KAAK,CAAEC,QAAQ,CAAC,CAAGhC,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACiC,YAAY,CAAEC,eAAe,CAAC,CAAGlC,QAAQ,CAAC,KAAK,CAAC,CACvD,KAAM,CAACmC,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGpC,QAAQ,CAAC,EAAE,CAAC,CAE9D;AACA,KAAM,CAACqC,QAAQ,CAAEC,WAAW,CAAC,CAAGtC,QAAQ,CAAC,SAAS,CAAC,CACnD,KAAM,CAACuC,WAAW,CAAEC,cAAc,CAAC,CAAGxC,QAAQ,CAAC,IAAI,CAAC,CAAE;AACtD,KAAM,CAACyC,WAAW,CAAEC,cAAc,CAAC,CAAG1C,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAAC2C,eAAe,CAAEC,kBAAkB,CAAC,CAAG5C,QAAQ,CAAC,EAAE,CAAC,CAE1DC,SAAS,CAAC,IAAM,CACd,KAAM,CAAA4C,gBAAgB,CAAG,KAAAA,CAAA,GAAY,CACnC,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAzC,kBAAkB,CAACoB,EAAE,CAAC,CAC7C,KAAM,CAAAsB,UAAU,CAAGD,QAAQ,CAACE,IAAI,CAChCpB,cAAc,CAACmB,UAAU,CAAC,CAC1B,GAAIvB,IAAI,CAACyB,IAAI,GAAK,UAAU,EAAKzB,IAAI,CAACyB,IAAI,GAAK,MAAM,EAAIF,UAAU,CAACG,mBAAmB,GAAK1B,IAAI,CAAC2B,QAAS,CAAE,CAC1GjB,eAAe,CAAC,IAAI,CAAC,CACvB,CACF,CAAE,MAAOkB,GAAG,CAAE,CACZpB,QAAQ,CAAC,sCAAsC,CAAC,CAClD,CAAC,OAAS,CACRF,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CACD,GAAIN,IAAI,CAAEqB,gBAAgB,CAAC,CAAC,CAC9B,CAAC,CAAE,CAACpB,EAAE,CAAED,IAAI,CAAC,CAAC,CAEd,KAAM,CAAA6B,kBAAkB,CAAG,cAAAA,CAAOC,SAAS,CAAkB,IAAhB,CAAAC,MAAM,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,EAAE,CACtDpB,oBAAoB,CAAC,EAAE,CAAC,CACxB,GAAI,CACF,KAAM,CAAAU,QAAQ,CAAG,KAAM,CAAAxC,uBAAuB,CAACmB,EAAE,CAAE,CAAET,MAAM,CAAEsC,SAAS,CAAEX,eAAe,CAAEY,MAAO,CAAC,CAAC,CAClG3B,cAAc,CAACkB,QAAQ,CAACE,IAAI,CAAC,CAC7BJ,kBAAkB,CAAC,EAAE,CAAC,CACtBF,cAAc,CAAC,KAAK,CAAC,CACrBF,cAAc,CAAC,IAAI,CAAC,CACtB,CAAE,MAAOY,GAAG,CAAE,KAAAO,aAAA,CAAAC,kBAAA,CACZxB,oBAAoB,6BAAAyB,MAAA,CAA6B,EAAAF,aAAA,CAAAP,GAAG,CAACN,QAAQ,UAAAa,aAAA,kBAAAC,kBAAA,CAAZD,aAAA,CAAcX,IAAI,UAAAY,kBAAA,iBAAlBA,kBAAA,CAAoBE,OAAO,GAAIV,GAAG,CAACU,OAAO,CAAE,CAAC,CAChG,CACF,CAAC,CAED,KAAM,CAAAC,SAAS,CAAIC,MAAM,EAAK,CAC5BxB,cAAc,CAACwB,MAAM,CAAC,CACtBtB,cAAc,CAAC,IAAI,CAAC,CACtB,CAAC,CAED,KAAM,CAAAuB,qBAAqB,CAAGA,CAAA,GAAM,CAClC,KAAM,CAAAjD,MAAM,CAAGW,WAAW,CAACX,MAAM,CACjC,mBACEF,KAAA,QAAKoD,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BzD,IAAA,OAAAyD,QAAA,CAAI,cAAY,CAAI,CAAC,CACpBnD,MAAM,GAAK,uBAAuB,eACjCF,KAAA,CAAAF,SAAA,EAAAuD,QAAA,eACEzD,IAAA,WAAQwD,SAAS,CAAC,gBAAgB,CAACE,OAAO,CAAEA,CAAA,GAAMf,kBAAkB,CAAC,yBAAyB,CAAE,CAAAc,QAAA,CAAC,6BAAsB,CAAQ,CAAC,cAChIzD,IAAA,WAAQwD,SAAS,CAAC,gBAAgB,CAACE,OAAO,CAAEA,CAAA,GAAML,SAAS,CAAC,mBAAmB,CAAE,CAAAI,QAAA,CAAC,2BAAoB,CAAQ,CAAC,EAC/G,CACH,CACAnD,MAAM,GAAK,yBAAyB,eAAIN,IAAA,WAAQ0D,OAAO,CAAEA,CAAA,GAAMf,kBAAkB,CAAC,iCAAiC,CAAE,CAAAc,QAAA,CAAC,kCAAsB,CAAQ,CAAC,CACrJnD,MAAM,GAAK,iCAAiC,eAAIN,IAAA,WAAQ0D,OAAO,CAAEA,CAAA,GAAMf,kBAAkB,CAAC,yBAAyB,CAAE,CAAAc,QAAA,CAAC,wBAAiB,CAAQ,CAAC,CAChJnD,MAAM,GAAK,yBAAyB,eACnCF,KAAA,CAAAF,SAAA,EAAAuD,QAAA,eACEzD,IAAA,WAAQwD,SAAS,CAAC,gBAAgB,CAACE,OAAO,CAAEA,CAAA,GAAMf,kBAAkB,CAAC,uBAAuB,CAAE,CAAAc,QAAA,CAAC,8BAAuB,CAAQ,CAAC,cAC/HzD,IAAA,WAAQwD,SAAS,CAAC,eAAe,CAACE,OAAO,CAAEA,CAAA,GAAML,SAAS,CAAC,QAAQ,CAAE,CAAAI,QAAA,CAAC,2BAAoB,CAAQ,CAAC,EACnG,CACH,CACAnD,MAAM,GAAK,uBAAuB,eAAIN,IAAA,MAAAyD,QAAA,CAAG,kCAAgC,CAAG,CAAC,CAC7EnD,MAAM,GAAK,qBAAqB,eAAIN,IAAA,MAAAyD,QAAA,CAAG,6BAA2B,CAAG,CAAC,EACpE,CAAC,CAEV,CAAC,CAED,KAAM,CAAAE,iBAAiB,CAAGA,CAAA,GAAM,CAC9B,KAAM,CAAArD,MAAM,CAAGW,WAAW,CAACX,MAAM,CAChC,GAAIW,WAAW,CAACgB,eAAe,EAAI3B,MAAM,GAAK,qBAAqB,CAAE,CACpE,mBAAON,IAAA,CAACN,IAAI,EAACkE,EAAE,kBAAAT,MAAA,CAAmBpC,EAAE,UAAS,CAACyC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAAC,iCAAqB,CAAM,CAAC,CACvG,CACA,OAAQnD,MAAM,EACZ,IAAK,qBAAqB,CACxB,mBAAON,IAAA,WAAQ0D,OAAO,CAAEA,CAAA,GAAMf,kBAAkB,CAAC,uBAAuB,CAAE,CAAAc,QAAA,CAAC,wBAAsB,CAAQ,CAAC,CAC5G,IAAK,iCAAiC,CACpC,mBAAOzD,IAAA,WAAQ0D,OAAO,CAAEA,CAAA,GAAMf,kBAAkB,CAAC,yBAAyB,CAAE,CAAAc,QAAA,CAAC,kCAAgC,CAAQ,CAAC,CACxH,IAAK,uBAAuB,CAC1B,mBAAOzD,IAAA,CAACN,IAAI,EAACkE,EAAE,kBAAAT,MAAA,CAAmBpC,EAAE,YAAW,CAACyC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAAC,0BAAwB,CAAM,CAAC,CAC5G,QACE,mBAAOzD,IAAA,MAAAyD,QAAA,CAAG,mEAAiE,CAAG,CAAC,CACnF,CACF,CAAC,CAED,KAAM,CAAAI,kBAAkB,CAAGA,CAAA,GAAM,CAC/B,GAAI,CAAChC,WAAW,CAAE,MAAO,KAAI,CAE7B,mBACIzB,KAAA,QAAAqD,QAAA,eACIrD,KAAA,QAAKoD,SAAS,CAAC,YAAY,CAAAC,QAAA,eACvBzD,IAAA,UAAAyD,QAAA,CAAO,SAAO,CAAO,CAAC,cACtBzD,IAAA,aACI8D,KAAK,CAAE7B,eAAgB,CACvB8B,QAAQ,CAAGC,CAAC,EAAK9B,kBAAkB,CAAC8B,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CACpDI,IAAI,CAAC,GAAG,CACRC,KAAK,CAAE,CAAEC,KAAK,CAAE,MAAO,CAAE,CAC5B,CAAC,EACD,CAAC,cACNpE,IAAA,WACIwD,SAAS,CAAC,gBAAgB,CAC1BE,OAAO,CAAEA,CAAA,GAAMf,kBAAkB,CAAC,qBAAqB,CAAEV,eAAe,CAAE,CAC1EoC,QAAQ,CAAE,CAACpC,eAAgB,CAAAwB,QAAA,CAC9B,wBAED,CAAQ,CAAC,EACR,CAAC,CAEZ,CAAC,CAED,GAAItC,OAAO,CAAE,mBAAOnB,IAAA,MAAAyD,QAAA,CAAG,gCAA8B,CAAG,CAAC,CACzD,GAAIpC,KAAK,CAAE,mBAAOrB,IAAA,MAAGwD,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAEpC,KAAK,CAAI,CAAC,CACvD,GAAI,CAACE,YAAY,CAAE,mBAAOvB,IAAA,MAAGwD,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,kDAAgD,CAAG,CAAC,CACxG,GAAI,CAACxC,WAAW,CAAE,mBAAOjB,IAAA,MAAAyD,QAAA,CAAG,uBAAqB,CAAG,CAAC,CAErD,KAAM,CAAAa,UAAU,CAAGxD,IAAI,CAACyB,IAAI,GAAK,UAAU,CAC3C,KAAM,CAAAgC,kBAAkB,CAAG5D,MAAM,CAAC6D,OAAO,CAACvD,WAAW,CAACX,MAAM,CAAC,CAE7D,mBACEF,KAAA,CAAAF,SAAA,EAAAuD,QAAA,eACEzD,IAAA,CAACF,KAAK,EAAC2E,MAAM,CAAE1C,WAAY,CAAC2C,OAAO,CAAEA,CAAA,GAAM1C,cAAc,CAAC,KAAK,CAAE,CAAC2C,KAAK,YAAAxB,MAAA,CAAa9C,YAAY,CAACwB,WAAW,CAAC,CAAG,CAAA4B,QAAA,CAC7GI,kBAAkB,CAAC,CAAC,CAChB,CAAC,cAERzD,KAAA,QAAKoD,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BrD,KAAA,QAAAqD,QAAA,eACEzD,IAAA,OAAAyD,QAAA,CAAKxC,WAAW,CAAC0D,KAAK,CAAK,CAAC,cAC5BvE,KAAA,MAAAqD,QAAA,EAAG,MAAI,CAACxC,WAAW,CAACF,EAAE,CAAC,mBAAiB,CAACE,WAAW,CAACuB,mBAAmB,EAAI,CAAC,EAC1E,CAAC,cACNxC,IAAA,QAAKwD,SAAS,iBAAAL,MAAA,CAAkBlC,WAAW,CAACX,MAAM,CAACC,WAAW,CAAC,CAAC,CAAG,CAAAkD,QAAA,CAChEpD,YAAY,CAACY,WAAW,CAACX,MAAM,CAAC,CAC9B,CAAC,EACH,CAAC,cAENN,IAAA,QAAKwD,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAChC9C,MAAM,CAACiE,GAAG,CAAC,CAACC,KAAK,CAAEC,KAAK,gBACvB1E,KAAA,QAAiBoD,SAAS,mBAAAL,MAAA,CAAoB2B,KAAK,GAAKP,kBAAkB,CAAG,QAAQ,CAAG,EAAE,MAAApB,MAAA,CAAI2B,KAAK,CAAGP,kBAAkB,CAAG,WAAW,CAAG,EAAE,CAAG,CAAAd,QAAA,eAC5IzD,IAAA,QAAKwD,SAAS,CAAC,cAAc,CAAM,CAAC,cACpCxD,IAAA,QAAKwD,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAAEpD,YAAY,CAACwE,KAAK,CAAC,CAAM,CAAC,GAFnDA,KAGL,CACN,CAAC,CACC,CAAC,CAELpD,iBAAiB,eAAIzB,IAAA,MAAGwD,SAAS,CAAC,YAAY,CAACW,KAAK,CAAE,CAAEY,SAAS,CAAE,QAAS,CAAE,CAAAtB,QAAA,CAAEhC,iBAAiB,CAAI,CAAC,CAEtG6C,UAAU,cACTlE,KAAA,QAAKoD,SAAS,CAAC,eAAe,CAAAC,QAAA,EAC3BF,qBAAqB,CAAC,CAAC,cACxBnD,KAAA,QAAKoD,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BrD,KAAA,QAAKoD,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BzD,IAAA,WAAQ0D,OAAO,CAAEA,CAAA,GAAM9B,WAAW,CAAC,SAAS,CAAE,CAAC4B,SAAS,CAAE7B,QAAQ,GAAK,SAAS,CAAG,QAAQ,CAAG,EAAG,CAAA8B,QAAA,CAAC,SAAO,CAAQ,CAAC,cAClHzD,IAAA,WAAQ0D,OAAO,CAAEA,CAAA,GAAM9B,WAAW,CAAC,OAAO,CAAE,CAAC4B,SAAS,CAAE7B,QAAQ,GAAK,OAAO,CAAG,QAAQ,CAAG,EAAG,CAAA8B,QAAA,CAAC,cAAY,CAAQ,CAAC,cACnHzD,IAAA,WAAQ0D,OAAO,CAAEA,CAAA,GAAM9B,WAAW,CAAC,SAAS,CAAE,CAAC4B,SAAS,CAAE7B,QAAQ,GAAK,SAAS,CAAG,QAAQ,CAAG,EAAG,CAAA8B,QAAA,CAAC,SAAO,CAAQ,CAAC,EAC/G,CAAC,cACNrD,KAAA,QAAKoD,SAAS,CAAC,aAAa,CAAAC,QAAA,EACzB9B,QAAQ,GAAK,SAAS,eACnBvB,KAAA,QAAAqD,QAAA,eACEzD,IAAA,OAAAyD,QAAA,CAAI,qBAAmB,CAAI,CAAC,cAC5BrD,KAAA,MAAAqD,QAAA,eAAGzD,IAAA,WAAAyD,QAAA,CAAQ,cAAY,CAAQ,CAAC,IAAC,CAACxC,WAAW,CAAC+D,WAAW,EAAI,CAAC,EAE3D,CACR,CACArD,QAAQ,GAAK,OAAO,eAAI3B,IAAA,QAAAyD,QAAA,cAAKzD,IAAA,MAAAyD,QAAA,CAAG,oCAAkC,CAAG,CAAC,CAAK,CAAC,CAC5E9B,QAAQ,GAAK,SAAS,eAAI3B,IAAA,QAAAyD,QAAA,cAAKzD,IAAA,MAAAyD,QAAA,CAAG,wCAAsC,CAAG,CAAC,CAAK,CAAC,EAChF,CAAC,EACH,CAAC,EACH,CAAC,cAENrD,KAAA,QAAKoD,SAAS,CAAC,WAAW,CAAAC,QAAA,eACtBrD,KAAA,QAAKoD,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BzD,IAAA,OAAAyD,QAAA,CAAI,qBAAmB,CAAI,CAAC,cAC5BrD,KAAA,MAAAqD,QAAA,eAAGzD,IAAA,WAAAyD,QAAA,CAAQ,cAAY,CAAQ,CAAC,IAAC,CAACxC,WAAW,CAAC+D,WAAW,EAAI,CAAC,CAC7D/D,WAAW,CAACgB,eAAe,eAC1B7B,KAAA,QAAKoD,SAAS,CAAC,qBAAqB,CAAAC,QAAA,eAACzD,IAAA,WAAAyD,QAAA,CAAQ,uBAAqB,CAAQ,CAAC,IAAC,CAACxC,WAAW,CAACgB,eAAe,EAAM,CAC/G,EACE,CAAC,cACN7B,KAAA,QAAKoD,SAAS,CAAC,aAAa,CAAAC,QAAA,eACxBzD,IAAA,OAAAyD,QAAA,CAAI,YAAU,CAAI,CAAC,CAClBE,iBAAiB,CAAC,CAAC,EACnB,CAAC,EACL,CACN,EACD,CAAC,CAEP,CAAC,CAED,cAAe,CAAA/C,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}