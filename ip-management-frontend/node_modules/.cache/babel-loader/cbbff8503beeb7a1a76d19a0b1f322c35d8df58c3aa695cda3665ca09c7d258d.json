{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Routes,Route,Navigate}from'react-router-dom';import LoginForm from'./components/LoginForm';import RegisterForm from'./components/RegisterForm';import ApplicationForm from'./components/ApplicationForm';import ApplicationList from'./components/ApplicationList';import ApplicationDetail from'./components/ApplicationDetail';import AmendmentPage from'./components/AmendmentPage';import PaymentPage from'./components/PaymentPage';import ProtectedRoute from'./components/ProtectedRoute';import Header from'./components/Header';import'./styles/App.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function App(){const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{const storedUser=localStorage.getItem('user');if(storedUser){setUser(JSON.parse(storedUser));}setLoading(false);},[]);const handleLogin=userData=>{localStorage.setItem('user',JSON.stringify(userData));setUser(userData);};const handleLogout=()=>{localStorage.removeItem('user');setUser(null);};if(loading){return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});// Or a proper spinner component\n}return/*#__PURE__*/_jsxs(_Fragment,{children:[user&&/*#__PURE__*/_jsx(Header,{user:user,onLogout:handleLogout}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:!user?/*#__PURE__*/_jsx(LoginForm,{onLogin:handleLogin}):/*#__PURE__*/_jsx(Navigate,{to:\"/applications\"})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:!user?/*#__PURE__*/_jsx(RegisterForm,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/applications\"})}),/*#__PURE__*/_jsxs(Route,{element:/*#__PURE__*/_jsx(ProtectedRoute,{user:user,allowedRoles:['USER','REVIEWER']}),children:[/*#__PURE__*/_jsx(Route,{path:\"/applications\",element:/*#__PURE__*/_jsx(ApplicationList,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/applications/new\",element:/*#__PURE__*/_jsx(ApplicationForm,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/applications/:id\",element:/*#__PURE__*/_jsx(ApplicationDetail,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/applications/:id/amend\",element:/*#__PURE__*/_jsx(AmendmentPage,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/applications/:id/payment\",element:/*#__PURE__*/_jsx(PaymentPage,{user:user})})]}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:user?'/applications':'/login'})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/\"})})]})})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","Routes","Route","Navigate","LoginForm","RegisterForm","ApplicationForm","ApplicationList","ApplicationDetail","AmendmentPage","PaymentPage","ProtectedRoute","Header","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","user","setUser","loading","setLoading","storedUser","localStorage","getItem","JSON","parse","handleLogin","userData","setItem","stringify","handleLogout","removeItem","children","onLogout","className","path","element","onLogin","to","allowedRoles"],"sources":["C:/Users/Admin/OneDrive/Máy tính/Báo cáo project 1/SHTT_NEW/ip-management-frontend/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Routes, Route, Navigate } from 'react-router-dom';\r\nimport LoginForm from './components/LoginForm';\r\nimport RegisterForm from './components/RegisterForm';\r\nimport ApplicationForm from './components/ApplicationForm';\r\nimport ApplicationList from './components/ApplicationList';\r\nimport ApplicationDetail from './components/ApplicationDetail';\r\nimport AmendmentPage from './components/AmendmentPage';\r\nimport PaymentPage from './components/PaymentPage';\r\nimport ProtectedRoute from './components/ProtectedRoute';\r\nimport Header from './components/Header';\r\nimport './styles/App.css';\r\n\r\nfunction App() {\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const storedUser = localStorage.getItem('user');\r\n    if (storedUser) {\r\n      setUser(JSON.parse(storedUser));\r\n    }\r\n    setLoading(false);\r\n  }, []);\r\n\r\n  const handleLogin = (userData) => {\r\n    localStorage.setItem('user', JSON.stringify(userData));\r\n    setUser(userData);\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('user');\r\n    setUser(null);\r\n  };\r\n\r\n  if (loading) {\r\n    return <p>Loading...</p>; // Or a proper spinner component\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {user && <Header user={user} onLogout={handleLogout} />}\r\n      <div className=\"container\">\r\n        <Routes>\r\n          {/* Public Routes */}\r\n          <Route path=\"/login\" element={!user ? <LoginForm onLogin={handleLogin} /> : <Navigate to=\"/applications\" />} />\r\n          <Route path=\"/register\" element={!user ? <RegisterForm /> : <Navigate to=\"/applications\" />} />\r\n\r\n          {/* Protected Routes */}\r\n          <Route element={<ProtectedRoute user={user} allowedRoles={['USER', 'REVIEWER']} />}>\r\n            <Route path=\"/applications\" element={<ApplicationList user={user} />} />\r\n            <Route path=\"/applications/new\" element={<ApplicationForm user={user} />} />\r\n            <Route path=\"/applications/:id\" element={<ApplicationDetail user={user} />} />\r\n            <Route path=\"/applications/:id/amend\" element={<AmendmentPage user={user} />} />\r\n            <Route path=\"/applications/:id/payment\" element={<PaymentPage user={user} />} />\r\n          </Route>\r\n\r\n          {/* Default Route */}\r\n          <Route path=\"/\" element={<Navigate to={user ? '/applications' : '/login'} />} />\r\n          \r\n          {/* Fallback for any other route */}\r\n          <Route path=\"*\" element={<Navigate to=\"/\" />} />\r\n        </Routes>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}