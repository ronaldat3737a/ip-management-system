{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Routes,Route,Navigate}from\"react-router-dom\";import LoginForm from\"./components/LoginForm\";import RegisterForm from\"./components/RegisterForm\";import ApplicationForm from\"./components/ApplicationForm\";import ApplicationList from\"./components/ApplicationList\";import ApplicationDetail from\"./components/ApplicationDetail\";import ProtectedRoute from\"./components/ProtectedRoute\";import Header from\"./components/Header\";import Dashboard from\"./components/Dashboard\";import ReviewerDashboard from\"./components/ReviewerDashboard\";import ReviewerApplicationList from\"./components/ReviewerApplicationList\";// Import the new component\nimport\"./styles/App.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[user,setUser]=useState(null);useEffect(()=>{const storedUser=localStorage.getItem(\"user\");if(storedUser){setUser(JSON.parse(storedUser));}},[]);const handleLogin=userData=>{localStorage.setItem(\"user\",JSON.stringify(userData));setUser(userData);};const handleLogout=()=>{localStorage.removeItem(\"user\");setUser(null);};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[user&&/*#__PURE__*/_jsx(Header,{user:user,onLogout:handleLogout}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(LoginForm,{onLogin:handleLogin})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(RegisterForm,{})}),/*#__PURE__*/_jsxs(Route,{element:/*#__PURE__*/_jsx(ProtectedRoute,{user:user,allowedRoles:['USER']}),children:[/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:/*#__PURE__*/_jsx(Dashboard,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/submit\",element:/*#__PURE__*/_jsx(ApplicationForm,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/applications/user\",element:/*#__PURE__*/_jsx(ApplicationList,{user:user})})]}),/*#__PURE__*/_jsxs(Route,{element:/*#__PURE__*/_jsx(ProtectedRoute,{user:user,allowedRoles:[\"REVIEWER\"]}),children:[/*#__PURE__*/_jsx(Route,{path:\"/reviewer/dashboard\",element:/*#__PURE__*/_jsx(ReviewerDashboard,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/reviewer/pending\",element:/*#__PURE__*/_jsx(ReviewerApplicationList,{user:user,title:\"Pending Submissions\",filter:{status:'PENDING'}})}),/*#__PURE__*/_jsx(Route,{path:\"/reviewer/all\",element:/*#__PURE__*/_jsx(ReviewerApplicationList,{user:user,title:\"All Submissions\"})})]}),/*#__PURE__*/_jsx(Route,{element:/*#__PURE__*/_jsx(ProtectedRoute,{user:user,allowedRoles:[\"USER\",\"REVIEWER\"]}),children:/*#__PURE__*/_jsx(Route,{path:\"/applications/:id\",element:/*#__PURE__*/_jsx(ApplicationDetail,{user:user})})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:user?user.role===\"REVIEWER\"?\"/reviewer/dashboard\"// Default for REVIEWER is now their dashboard\n:\"/dashboard\"// Default for USER is their dashboard\n:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/\"})})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","Routes","Route","Navigate","LoginForm","RegisterForm","ApplicationForm","ApplicationList","ApplicationDetail","ProtectedRoute","Header","Dashboard","ReviewerDashboard","ReviewerApplicationList","jsx","_jsx","jsxs","_jsxs","App","user","setUser","storedUser","localStorage","getItem","JSON","parse","handleLogin","userData","setItem","stringify","handleLogout","removeItem","className","children","onLogout","path","element","onLogin","allowedRoles","title","filter","status","to","role"],"sources":["C:/Users/Admin/OneDrive/Máy tính/Báo cáo project 1/SHTT_NEW/ip-management-frontend/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Routes, Route, Navigate } from \"react-router-dom\";\r\nimport LoginForm from \"./components/LoginForm\";\r\nimport RegisterForm from \"./components/RegisterForm\";\r\nimport ApplicationForm from \"./components/ApplicationForm\";\r\nimport ApplicationList from \"./components/ApplicationList\";\r\nimport ApplicationDetail from \"./components/ApplicationDetail\";\r\nimport ProtectedRoute from \"./components/ProtectedRoute\";\r\nimport Header from \"./components/Header\";\r\nimport Dashboard from \"./components/Dashboard\";\r\nimport ReviewerDashboard from \"./components/ReviewerDashboard\";\r\nimport ReviewerApplicationList from \"./components/ReviewerApplicationList\"; // Import the new component\r\nimport \"./styles/App.css\";\r\n\r\nfunction App() {\r\n  const [user, setUser] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const storedUser = localStorage.getItem(\"user\");\r\n    if (storedUser) {\r\n      setUser(JSON.parse(storedUser));\r\n    }\r\n  }, []);\r\n\r\n  const handleLogin = (userData) => {\r\n    localStorage.setItem(\"user\", JSON.stringify(userData));\r\n    setUser(userData);\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem(\"user\");\r\n    setUser(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      {user && <Header user={user} onLogout={handleLogout} />}\r\n      <Routes>\r\n        {/* Public Routes */}\r\n        <Route path=\"/login\" element={<LoginForm onLogin={handleLogin} />} />\r\n        <Route path=\"/register\" element={<RegisterForm />} />\r\n\r\n        {/* Protected Routes for USER role */}\r\n        <Route element={<ProtectedRoute user={user} allowedRoles={['USER']} />}>\r\n          <Route path=\"/dashboard\" element={<Dashboard user={user} />} />\r\n          <Route path=\"/submit\" element={<ApplicationForm user={user} />} />\r\n          <Route path=\"/applications/user\" element={<ApplicationList user={user} />} />\r\n        </Route>\r\n\r\n        {/* Protected Routes for REVIEWER role */}\r\n        <Route element={<ProtectedRoute user={user} allowedRoles={[\"REVIEWER\"]} />}>\r\n          <Route path=\"/reviewer/dashboard\" element={<ReviewerDashboard user={user} />} />\r\n          <Route \r\n            path=\"/reviewer/pending\" \r\n            element={<ReviewerApplicationList user={user} title=\"Pending Submissions\" filter={{ status: 'PENDING' }} />} \r\n          />\r\n          <Route \r\n            path=\"/reviewer/all\" \r\n            element={<ReviewerApplicationList user={user} title=\"All Submissions\" />} \r\n          />\r\n        </Route>\r\n\r\n        {/* Protected Routes for BOTH roles (e.g., Detail Page) */}\r\n        <Route element={<ProtectedRoute user={user} allowedRoles={[\"USER\", \"REVIEWER\"]} />}>\r\n          <Route path=\"/applications/:id\" element={<ApplicationDetail user={user} />} />\r\n        </Route>\r\n\r\n        {/* Default Route */}\r\n        <Route\r\n          path=\"/\"\r\n          element={\r\n            <Navigate\r\n              to={\r\n                user\r\n                  ? user.role === \"REVIEWER\"\r\n                    ? \"/reviewer/dashboard\" // Default for REVIEWER is now their dashboard\r\n                    : \"/dashboard\" // Default for USER is their dashboard\r\n                  : \"/login\"\r\n              }\r\n            />\r\n          }\r\n        />\r\n        \r\n        {/* Fallback for any other route */}\r\n        <Route path=\"*\" element={<Navigate to=\"/\" />} />\r\n      </Routes>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}