{"ast":null,"code":"import _objectSpread from\"C:/Users/Admin/OneDrive/M\\xE1y t\\xEDnh/B\\xE1o c\\xE1o project 1/SHTT_NEW/ip-management-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useParams,useNavigate,Link}from'react-router-dom';import{getApplicationById,updateApplicationStatus}from'../services/api';import'../styles/Form.css';import'../styles/Buttons.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AmendmentPage=_ref=>{let{user}=_ref;const{id}=useParams();const navigate=useNavigate();const[application,setApplication]=useState(null);const[formData,setFormData]=useState({description:'',claims:''});const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[message,setMessage]=useState('');useEffect(()=>{const fetchApplication=async()=>{try{const response=await getApplicationById(id);const app=response.data;setApplication(app);setFormData({description:app.description,claims:app.claims||''// Assuming claims might not exist\n});}catch(err){setError('Failed to fetch application details.');}finally{setLoading(false);}};fetchApplication();},[id]);const handleInputChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const handleSubmit=async e=>{e.preventDefault();setError('');setMessage('');try{// Logic to update the application content would go here.\n// For now, we'll just resubmit it for examination.\nawait updateApplicationStatus(id,{status:'FORMALITY_EXAMINATION',rejectionReason:''});setMessage('Application resubmitted successfully!');setTimeout(()=>navigate(\"/applications/\".concat(id)),2000);}catch(err){var _err$response,_err$response$data;setError(\"Failed to resubmit application: \".concat(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||err.message));}};if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});if(error)return/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error});if(!application)return/*#__PURE__*/_jsx(\"p\",{children:\"Application not found.\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"back-link-container\",children:/*#__PURE__*/_jsx(Link,{to:\"/applications/\".concat(id),className:\"back-link\",children:\"\\u2190 Back to Details\"})}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Amend Application - \",application.title]}),application.rejectionReason&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-warning\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Reason for amendment:\"}),\" \",application.rejectionReason]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[message&&/*#__PURE__*/_jsx(\"p\",{style:{color:'green'},children:message}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Description:\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:formData.description,onChange:handleInputChange,rows:\"5\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Protection Claims:\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"claims\",value:formData.claims,onChange:handleInputChange,rows:\"5\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button-primary\",children:\"Save and Resubmit\"})]})]});};export default AmendmentPage;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","Link","getApplicationById","updateApplicationStatus","jsx","_jsx","jsxs","_jsxs","AmendmentPage","_ref","user","id","navigate","application","setApplication","formData","setFormData","description","claims","loading","setLoading","error","setError","message","setMessage","fetchApplication","response","app","data","err","handleInputChange","e","name","value","target","prev","_objectSpread","handleSubmit","preventDefault","status","rejectionReason","setTimeout","concat","_err$response","_err$response$data","children","style","color","className","to","title","onSubmit","onChange","rows","type"],"sources":["C:/Users/Admin/OneDrive/Máy tính/Báo cáo project 1/SHTT_NEW/ip-management-frontend/src/components/AmendmentPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate, Link } from 'react-router-dom';\nimport { getApplicationById, updateApplicationStatus } from '../services/api';\nimport '../styles/Form.css';\nimport '../styles/Buttons.css';\n\nconst AmendmentPage = ({ user }) => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const [application, setApplication] = useState(null);\n  const [formData, setFormData] = useState({ description: '', claims: '' });\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [message, setMessage] = useState('');\n\n  useEffect(() => {\n    const fetchApplication = async () => {\n      try {\n        const response = await getApplicationById(id);\n        const app = response.data;\n        setApplication(app);\n        setFormData({\n          description: app.description,\n          claims: app.claims || '', // Assuming claims might not exist\n        });\n      } catch (err) {\n        setError('Failed to fetch application details.');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchApplication();\n  }, [id]);\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({ ...prev, [name]: value }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    setMessage('');\n    \n    try {\n      // Logic to update the application content would go here.\n      // For now, we'll just resubmit it for examination.\n      await updateApplicationStatus(id, { status: 'FORMALITY_EXAMINATION', rejectionReason: '' });\n      setMessage('Application resubmitted successfully!');\n      setTimeout(() => navigate(`/applications/${id}`), 2000);\n    } catch (err) {\n      setError(`Failed to resubmit application: ${err.response?.data?.message || err.message}`);\n    }\n  };\n\n  if (loading) return <p>Loading...</p>;\n  if (error) return <p style={{ color: 'red' }}>{error}</p>;\n  if (!application) return <p>Application not found.</p>;\n\n  return (\n    <div className=\"form-container\">\n      <div className=\"back-link-container\">\n        <Link to={`/applications/${id}`} className=\"back-link\">← Back to Details</Link>\n      </div>\n      <h2>Amend Application - {application.title}</h2>\n      \n      {application.rejectionReason && (\n        <div className=\"alert alert-warning\">\n          <strong>Reason for amendment:</strong> {application.rejectionReason}\n        </div>\n      )}\n\n      <form onSubmit={handleSubmit}>\n        {message && <p style={{ color: 'green' }}>{message}</p>}\n        <div>\n          <label>Description:</label>\n          <textarea name=\"description\" value={formData.description} onChange={handleInputChange} rows=\"5\" />\n        </div>\n        <div>\n          <label>Protection Claims:</label>\n          <textarea name=\"claims\" value={formData.claims} onChange={handleInputChange} rows=\"5\" />\n        </div>\n        {/* Add file upload if necessary */}\n        <button type=\"submit\" className=\"button-primary\">Save and Resubmit</button>\n      </form>\n    </div>\n  );\n};\n\nexport default AmendmentPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}