{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Routes,Route,Navigate}from'react-router-dom';import LoginForm from'./components/LoginForm';import RegisterForm from'./components/RegisterForm';import ApplicationForm from'./components/ApplicationForm';import ApplicationList from'./components/ApplicationList';import ApplicationDetail from'./components/ApplicationDetail';import AmendmentPage from'./components/AmendmentPage';import PaymentPage from'./components/PaymentPage';import ProtectedRoute from'./components/ProtectedRoute';import Header from'./components/Header';import ReviewerDashboard from'./components/ReviewerDashboard';import AdminDashboard from'./components/AdminDashboard';import'./styles/App.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function App(){const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{const storedUser=localStorage.getItem('user');if(storedUser){setUser(JSON.parse(storedUser));}setLoading(false);},[]);const handleLogin=userData=>{localStorage.setItem('user',JSON.stringify(userData));setUser(userData);};const handleLogout=()=>{localStorage.removeItem('user');setUser(null);};if(loading){return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});}const defaultAuthenticatedRoute=user?user.role==='REVIEWER'?'/reviewer/dashboard':'/applications':'/login';return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{user:user,onLogout:handleLogout}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:!user?/*#__PURE__*/_jsx(LoginForm,{onLogin:handleLogin}):/*#__PURE__*/_jsx(Navigate,{to:defaultAuthenticatedRoute})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:!user?/*#__PURE__*/_jsx(RegisterForm,{}):/*#__PURE__*/_jsx(Navigate,{to:defaultAuthenticatedRoute})}),/*#__PURE__*/_jsxs(Route,{element:/*#__PURE__*/_jsx(ProtectedRoute,{user:user,allowedRoles:['USER']}),children:[/*#__PURE__*/_jsx(Route,{path:\"/applications\",element:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(ApplicationList,{user:user})})}),/*#__PURE__*/_jsx(Route,{path:\"/applications/new\",element:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(ApplicationForm,{user:user})})})]}),/*#__PURE__*/_jsx(Route,{element:/*#__PURE__*/_jsx(ProtectedRoute,{user:user,allowedRoles:['REVIEWER']}),children:/*#__PURE__*/_jsxs(Route,{path:\"/reviewer\",element:/*#__PURE__*/_jsx(ReviewerDashboard,{}),children:[/*#__PURE__*/_jsx(Route,{path:\"dashboard\",element:/*#__PURE__*/_jsx(AdminDashboard,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"applications\",element:/*#__PURE__*/_jsx(ApplicationList,{user:user})})]})}),/*#__PURE__*/_jsxs(Route,{element:/*#__PURE__*/_jsx(ProtectedRoute,{user:user,allowedRoles:['USER','REVIEWER']}),children:[/*#__PURE__*/_jsx(Route,{path:\"/applications/:id\",element:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(ApplicationDetail,{user:user})})}),/*#__PURE__*/_jsx(Route,{path:\"/applications/:id/amend\",element:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(AmendmentPage,{user:user})})}),/*#__PURE__*/_jsx(Route,{path:\"/applications/:id/payment\",element:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(PaymentPage,{user:user})})})]}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:defaultAuthenticatedRoute})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/\"})})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","Routes","Route","Navigate","LoginForm","RegisterForm","ApplicationForm","ApplicationList","ApplicationDetail","AmendmentPage","PaymentPage","ProtectedRoute","Header","ReviewerDashboard","AdminDashboard","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","user","setUser","loading","setLoading","storedUser","localStorage","getItem","JSON","parse","handleLogin","userData","setItem","stringify","handleLogout","removeItem","children","defaultAuthenticatedRoute","role","onLogout","path","element","onLogin","to","allowedRoles","className"],"sources":["C:/Users/Admin/OneDrive/Máy tính/Báo cáo project 1/SHTT_NEW/ip-management-frontend/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Routes, Route, Navigate } from 'react-router-dom';\r\nimport LoginForm from './components/LoginForm';\r\nimport RegisterForm from './components/RegisterForm';\r\nimport ApplicationForm from './components/ApplicationForm';\r\nimport ApplicationList from './components/ApplicationList';\r\nimport ApplicationDetail from './components/ApplicationDetail';\r\nimport AmendmentPage from './components/AmendmentPage';\r\nimport PaymentPage from './components/PaymentPage';\r\nimport ProtectedRoute from './components/ProtectedRoute';\r\nimport Header from './components/Header';\r\nimport ReviewerDashboard from './components/ReviewerDashboard';\r\nimport AdminDashboard from './components/AdminDashboard';\r\nimport './styles/App.css';\r\n\r\nfunction App() {\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const storedUser = localStorage.getItem('user');\r\n    if (storedUser) {\r\n      setUser(JSON.parse(storedUser));\r\n    }\r\n    setLoading(false);\r\n  }, []);\r\n\r\n  const handleLogin = (userData) => {\r\n    localStorage.setItem('user', JSON.stringify(userData));\r\n    setUser(userData);\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('user');\r\n    setUser(null);\r\n  };\r\n\r\n  if (loading) {\r\n    return <p>Loading...</p>;\r\n  }\r\n\r\n  const defaultAuthenticatedRoute = user ? (user.role === 'REVIEWER' ? '/reviewer/dashboard' : '/applications') : '/login';\r\n\r\n  return (\r\n    <>\r\n      <Header user={user} onLogout={handleLogout} />\r\n      <Routes>\r\n        {/* Public Routes */}\r\n        <Route path=\"/login\" element={!user ? <LoginForm onLogin={handleLogin} /> : <Navigate to={defaultAuthenticatedRoute} />} />\r\n        <Route path=\"/register\" element={!user ? <RegisterForm /> : <Navigate to={defaultAuthenticatedRoute} />} />\r\n\r\n        {/* Protected Routes for USER */}\r\n        <Route element={<ProtectedRoute user={user} allowedRoles={['USER']} />}>\r\n          <Route path=\"/applications\" element={<div className=\"container\"><ApplicationList user={user} /></div>} />\r\n          <Route path=\"/applications/new\" element={<div className=\"container\"><ApplicationForm user={user} /></div>} />\r\n        </Route>\r\n\r\n        {/* Protected Routes for REVIEWER */}\r\n        <Route element={<ProtectedRoute user={user} allowedRoles={['REVIEWER']} />}>\r\n          <Route path=\"/reviewer\" element={<ReviewerDashboard />}>\r\n            <Route path=\"dashboard\" element={<AdminDashboard user={user} />} />\r\n            <Route path=\"applications\" element={<ApplicationList user={user} />} />\r\n          </Route>\r\n        </Route>\r\n\r\n        {/* Routes accessible by BOTH */}\r\n        <Route element={<ProtectedRoute user={user} allowedRoles={['USER', 'REVIEWER']} />}>\r\n           <Route path=\"/applications/:id\" element={<div className=\"container\"><ApplicationDetail user={user} /></div>} />\r\n           <Route path=\"/applications/:id/amend\" element={<div className=\"container\"><AmendmentPage user={user} /></div>} />\r\n           <Route path=\"/applications/:id/payment\" element={<div className=\"container\"><PaymentPage user={user} /></div>} />\r\n        </Route>\r\n\r\n        {/* Default Route */}\r\n        <Route path=\"/\" element={<Navigate to={defaultAuthenticatedRoute} />} />\r\n        \r\n        {/* Fallback for any other route */}\r\n        <Route path=\"*\" element={<Navigate to=\"/\" />} />\r\n      </Routes>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}