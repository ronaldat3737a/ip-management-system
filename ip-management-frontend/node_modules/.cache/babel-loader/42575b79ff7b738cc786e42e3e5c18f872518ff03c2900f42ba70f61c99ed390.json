{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{getAllApplications,getApplicationsByUserId}from'../services/api';import'../styles/Table.css';import'../styles/Form.css';// Re-use styles for the back link\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const formatStatus=status=>{if(!status)return'N/A';return status.toLowerCase().replace(/_/g,' ').replace(/(?: |\\b)(\\w)/g,char=>char.toUpperCase());};const ApplicationList=_ref=>{let{user}=_ref;const[applications,setApplications]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const isUser=user&&user.role==='USER';const pageTitle=isUser?'My Applications':'Review Applications';useEffect(()=>{const fetchApplications=async()=>{try{let response;if(isUser){response=await getApplicationsByUserId(user.id);}else{// Default to reviewer view (all applications)\nresponse=await getAllApplications();}setApplications(response.data);}catch(err){setError('Failed to fetch applications.');console.error(err);}finally{setLoading(false);}};fetchApplications();},[user,isUser]);if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading applications...\"});if(error)return/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error});return/*#__PURE__*/_jsxs(\"div\",{className:\"list-container\",children:[isUser&&/*#__PURE__*/_jsx(\"div\",{className:\"back-link-container\",children:/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",className:\"back-link\",children:\"\\u2190 Back to Dashboard\"})}),/*#__PURE__*/_jsx(\"h2\",{children:pageTitle}),applications.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No applications found.\"}):/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Title\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Submitted By\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Details\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:applications.map(app=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:app.id}),/*#__PURE__*/_jsx(\"td\",{children:app.title}),/*#__PURE__*/_jsx(\"td\",{children:app.submittedByUsername}),/*#__PURE__*/_jsx(\"td\",{children:formatStatus(app.status)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{to:\"/applications/\".concat(app.id),children:\"View Details\"})})]},app.id))})]})]});};export default ApplicationList;","map":{"version":3,"names":["React","useState","useEffect","Link","getAllApplications","getApplicationsByUserId","jsx","_jsx","jsxs","_jsxs","formatStatus","status","toLowerCase","replace","char","toUpperCase","ApplicationList","_ref","user","applications","setApplications","loading","setLoading","error","setError","isUser","role","pageTitle","fetchApplications","response","id","data","err","console","children","style","color","className","to","length","map","app","title","submittedByUsername","concat"],"sources":["C:/Users/Admin/OneDrive/Máy tính/Báo cáo project 1/SHTT_NEW/ip-management-frontend/src/components/ApplicationList.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { getAllApplications, getApplicationsByUserId } from '../services/api';\r\nimport '../styles/Table.css';\r\nimport '../styles/Form.css'; // Re-use styles for the back link\r\n\r\nconst formatStatus = (status) => {\r\n  if (!status) return 'N/A';\r\n  return status\r\n    .toLowerCase()\r\n    .replace(/_/g, ' ')\r\n    .replace(/(?: |\\b)(\\w)/g, (char) => char.toUpperCase());\r\n};\r\n\r\nconst ApplicationList = ({ user }) => {\r\n  const [applications, setApplications] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  \r\n  const isUser = user && user.role === 'USER';\r\n  const pageTitle = isUser ? 'My Applications' : 'Review Applications';\r\n\r\n  useEffect(() => {\r\n    const fetchApplications = async () => {\r\n      try {\r\n        let response;\r\n        if (isUser) {\r\n          response = await getApplicationsByUserId(user.id);\r\n        } else {\r\n          // Default to reviewer view (all applications)\r\n          response = await getAllApplications();\r\n        }\r\n        setApplications(response.data);\r\n      } catch (err) {\r\n        setError('Failed to fetch applications.');\r\n        console.error(err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchApplications();\r\n  }, [user, isUser]);\r\n\r\n  if (loading) return <p>Loading applications...</p>;\r\n  if (error) return <p style={{ color: 'red' }}>{error}</p>;\r\n\r\n  return (\r\n    <div className=\"list-container\">\r\n      {isUser && (\r\n        <div className=\"back-link-container\">\r\n            <Link to=\"/dashboard\" className=\"back-link\">← Back to Dashboard</Link>\r\n        </div>\r\n      )}\r\n      <h2>{pageTitle}</h2>\r\n      {applications.length === 0 ? (\r\n        <p>No applications found.</p>\r\n      ) : (\r\n        <table>\r\n            <thead>\r\n                <tr>\r\n                    <th>ID</th>\r\n                    <th>Title</th>\r\n                    <th>Submitted By</th>\r\n                    <th>Status</th>\r\n                    <th>Details</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                {applications.map((app) => (\r\n                    <tr key={app.id}>\r\n                        <td>{app.id}</td>\r\n                        <td>{app.title}</td>\r\n                        <td>{app.submittedByUsername}</td>\r\n                        <td>{formatStatus(app.status)}</td>\r\n                        {/* Link to details is different for user vs reviewer in some systems, but same here for now */}\r\n                        <td><Link to={`/applications/${app.id}`}>View Details</Link></td>\r\n                    </tr>\r\n                ))}\r\n            </tbody>\r\n        </table>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ApplicationList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}